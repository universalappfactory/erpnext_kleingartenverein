import{u as v}from"./main.c8da65ec.js";import{q as x,u as w,v as k,w as g,x as C,y as L,z as b,C as m,E as S,G as M,b as N,_ as T,o as d,e as l,l as a,F as _,m as $,H as y,n as z,t as u,I as B,p as D}from"./vendor.093f32f1.js";function R(e){return w()?(k(e),!0):!1}function O(e){let i=0,o,r;const n=()=>{i-=1,r&&i<=0&&(r.stop(),o=void 0,r=void 0)};return(...c)=>(i+=1,o||(r=x(!0),o=r.run(()=>e(...c))),R(n),o)}function A(){const e=g(0),i=g(0),o=C([]),r=L({doctype:"Event",fields:["*"],filters:{event_type:"Public",status:"Open"},orderBy:"starts_on asc",start:0,pageLength:20,url:"/api/method/erpnext_kleingartenverein.api.get_dashboard_navigation"});r.fetch();const n=b({url:"/api/method/erpnext_kleingartenverein.api.get_unread_document_count"});n.fetch();const c=b({url:"/api/method/erpnext_kleingartenverein.api.get_user_info"});c.fetch();const t=function(s){if(!!s){console.log("XXXX"),console.log(JSON.stringify(s)),console.log(JSON.stringify(o));for(const p of s){const f=o.find(h=>h.read_marker_doctype&&h.read_marker_doctype===p.doctype);f&&(console.log("MATCH"),f.openCount=p.count)}}};return m(n,()=>{t(n.data)}),m(r,()=>{for(const s of r.data)o.push({displayTitle:s.displayTitle,href:s.href,icon:s.icon,mode:s.mode,openCount:0,read_marker_doctype:s.read_marker_doctype});t(n.data)}),S(()=>{v()}),M(()=>{console.log("onUnmounted")}),{x:e,y:i,navigation:o,readMarker:n,userInfo:c}}const H=O(A),V=N({name:"navbar",components:{},setup(){return{dashboard:H()}},methods:{navigateTo(e){e.href.toLocaleLowerCase()!==`/${this.$route.name.toLocaleLowerCase()}`&&e.href&&this.$router.push(e.href)},isRouter(e){return e.mode==="NavigationMode.Router"}},data(){},mounted(){}}),X=a("button",{"data-drawer-target":"default-sidebar","data-drawer-toggle":"default-sidebar","aria-controls":"default-sidebar","data-drawer-backdrop":"false",type:"button",class:"inline-flex items-center p-2 mt-2 ml-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200"},[a("span",{class:"sr-only"},"Open sidebar"),a("svg",{class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})])],-1),j={id:"default-sidebar",class:"fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0",tabindex:"-1","aria-labelledby":"drawer-backdrop-label"},E={class:"h-full px-3 py-4 overflow-y-auto bg-gray-50"},F=D('<h5 id="drawer-disabled-backdrop-label" class="text-base font-semibold text-gray-500 uppercase ml-5 mb-4">Menu </h5><button type="button" data-drawer-hide="default-sidebar" aria-controls="default-sidebar" class="block md:hidden text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 absolute top-2.5 right-2.5 inline-flex items-center"><svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg><span class="sr-only">Close menu</span></button>',2),I={class:"space-y-2 font-medium"},J=["onClick"],U={class:"ml-3 cursor-pointer"},q={key:0,class:"text-sm relative inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-red-500 border-2 border-white rounded-full -top-2 -right-30"},G=["href"],P=a("i",{class:"fa fa-sign-in text-red-100 text-lg aria-hidden=true"},"x",-1),K={class:"ml-3"};function Q(e,i,o,r,n,c){return d(),l(_,null,[X,a("aside",j,[a("div",E,[F,a("ul",I,[(d(!0),l(_,null,$(e.dashboard.navigation,t=>(d(),l("li",{key:t.displayTitle},[e.isRouter(t)?(d(),l("a",{key:0,onClick:s=>e.navigateTo(t),class:"flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-100"},[a("i",{class:y(["text-gray-500 text-6xl",t.icon]),fa:""},null,2),a("div",U,[z(u(t.displayTitle)+" ",1),t.openCount>0?(d(),l("div",q,u(t.openCount),1)):B("",!0)])],8,J)):(d(),l("a",{key:1,href:t.href,class:"flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-100"},[a("i",{class:y(["fa text-gray-500 text-6xl",t.icon])},null,2),P,a("span",K,u(t.displayTitle),1)],8,G))]))),128))])])])],64)}var Z=T(V,[["render",Q]]);export{Z as N,O as c,H as u};
