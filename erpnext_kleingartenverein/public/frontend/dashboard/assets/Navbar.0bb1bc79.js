import{u as g}from"./main.2e076ff9.js";import{p as w,q as k,u as C,v as L,w as u,x as m,y as $,z as R,b as _,_ as v,o as n,e as l,m as a,A as M,r as N,f as b,F as y,C as T,D as p,E as z,t as f,n as A,G as D}from"./vendor.0d1c2a14.js";function j(e){return k()?(C(e),!0):!1}function B(e){let r=0,s,o;const i=()=>{r-=1,o&&r<=0&&(o.stop(),s=void 0,o=void 0)};return(...d)=>(r+=1,s||(o=w(!0),s=o.run(()=>e(...d))),j(i),s)}function V(){let e;const r=L({doctype:"Event",fields:["*"],filters:{event_type:"Public",status:"Open"},orderBy:"starts_on asc",start:0,pageLength:20,url:"/api/method/erpnext_kleingartenverein.api.get_dashboard_navigation"});r.fetch();const s=u({url:"/api/method/erpnext_kleingartenverein.api.get_unread_document_count"}),o=u({url:"/api/method/erpnext_kleingartenverein.api.get_user_info"});o.fetch();const i=u({url:"/api/method/erpnext_kleingartenverein.api.mark_as_read"}),d=function(t){!t||(t.length>0?e==null||e.appendItems(t):e==null||e.clearReadMarkers(),e==null||e.calculateOpenCount())};return m(s,()=>{d(s.data)}),m(r,()=>{for(const t of r.data)e==null||e.append({displayTitle:t.displayTitle,href:t.href,icon:t.icon,mode:t.mode,openCount:0,read_marker_doctype:t.read_marker_doctype});s.fetch()}),$(()=>{e=g(),e.clearNavigation(),e.clearReadMarkers()}),R(()=>{}),{readMarker:s,userInfo:o,markAsRead:function(t,h){e.clearReadMarkers(),i.submit({doctype:t,name:h}),s.reset(),s.fetch()}}}const x=B(V),O=_({name:"Logo",setup(){return{dashboard:x()}}}),E={class:"sm:block"},I=["src"];function F(e,r,s,o,i,d){return n(),l("div",E,[a("img",{src:e.dashboard.userInfo.data.default_logo,class:"h-24",alt:"Logo"},null,8,I)])}var H=v(O,[["render",F]]);const S=_({name:"navbar",components:{Logo:H},setup(){const e=x(),r=M(),s=g();return{dashboard:e,route:r,store:s}},methods:{navigateTo(e){e.href.toLocaleLowerCase()!==`/${this.$route.name.toLocaleLowerCase()}`&&e.href&&this.$router.push(e.href)},isRouter(e){return e.mode==="NavigationMode.Router"}},data(){},mounted(){}}),q={class:"sm:hidden flex items-center justify-start"},G=a("button",{"data-drawer-target":"default-sidebar","data-drawer-toggle":"default-sidebar","aria-controls":"default-sidebar","data-drawer-backdrop":"true",type:"button",class:"inline-flex items-center p-2 ml-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200"},[a("span",{class:"sr-only"},"Open sidebar"),a("svg",{class:"w-6 h-6","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})])],-1),P={class:"md:hidden flex ml-2 md:mr-24 items-center w-full justify-center"},U={id:"default-sidebar",class:"fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0",tabindex:"-1","aria-labelledby":"drawer-backdrop-label"},J={class:"h-full px-3 py-4 overflow-y-auto bg-gray-50"},K=D('<h5 id="drawer-disabled-backdrop-label" class="text-base font-semibold text-gray-500 uppercase ml-5 mb-4"> Menu </h5><button type="button" data-drawer-hide="default-sidebar" aria-controls="default-sidebar" class="block md:hidden text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 absolute top-2.5 right-2.5 inline-flex items-center"><svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg><span class="sr-only">Close menu</span></button>',2),Q={class:"space-y-2 font-medium"},W=["onClick"],X={class:"ml-3 cursor-pointer"},Y={key:0,class:"text-sm relative inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-red-500 border-2 border-white rounded-full -top-2 -right-30"},Z=["href"],ee={class:"ml-3"},te={class:"hidden sm:block ml-64"},ae={class:"flex justify-center"};function se(e,r,s,o,i,d){const c=N("Logo");return n(),l(y,null,[a("div",q,[G,a("a",P,[b(c)])]),a("aside",U,[a("div",J,[K,a("ul",Q,[(n(!0),l(y,null,T(e.store.navigation,t=>(n(),l("li",{class:p(e.isRouter(t)&&t.href===e.route.path?"bg-green-100":""),key:t.displayTitle},[e.isRouter(t)?(n(),l("a",{key:0,onClick:h=>e.navigateTo(t),class:"flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-100"},[a("i",{class:p(["fa text-gray-500 text-6xl",t.icon])},null,2),a("div",X,[z(f(t.displayTitle)+" ",1),t.openCount>0?(n(),l("div",Y,f(t.openCount),1)):A("",!0)])],8,W)):(n(),l("a",{key:1,href:t.href,class:"flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-100"},[a("i",{class:p(["fa text-gray-500 text-6xl",t.icon])},null,2),a("span",ee,f(t.displayTitle),1)],8,Z))],2))),128))])])]),a("div",te,[a("div",ae,[b(c)])])],64)}var ne=v(S,[["render",se]]);export{ne as N,B as c,x as u};
